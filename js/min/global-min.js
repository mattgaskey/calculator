$(function(){function n(){return 1===u.length&&0===u[0]&&(u.length=0),$("div.calculate").text(u.join(""))}function t(){for(var n=0;n<f.length;n++)""===f[n]&&(f.splice(n,2),n-=1);return $("div.math").text(f.join(" "))}function e(){f.indexOf("=")>-1&&(f.length=0,u.length=0,t())}function i(n){if(n=n.toString().split(""),-1!==n.indexOf(".")){var t=n.slice(n.indexOf(".")+1,n.length);n=n.slice(0,n.indexOf(".")+1);for(var e=0;t[e]<1;)e++;return t=t.join("").slice(0,e+2),"0"===t[t.length-1]&&(t=t.slice(0,-1)),n.join("")+t}return n.join("")}function c(){$("div.content.decimal").click(function(){e(),u.indexOf(".")<0&&0===u.length?(u.push(0,$(this).children().text()),n()):u.indexOf(".")<0&&u.length>0?(u.push($(this).children().text()),n()):u.indexOf(".")>=0&&n()}),$("div.content.number").click(function(){e(),"0"===$(this)[0].innerText&&u.length<1?(u.length=0,n()):(u.push($(this).children().text()),n())}),$("#backspace").click(function(){u.pop(),n()}),$("#clear").click(function(){u.length=0,f.length=0,n(),t()}),$("#negate").click(function(){e(),u.unshift("-"),n()})}function r(){$("div.function").click(function(){f.push(u.join(""),$(this).children().text()),u.length=0,t()})}function l(){function n(n,t){return n*t}function t(n,t){return n/t}function e(n,t){return n+t}function c(n,t){return n-t}for(var r=f.slice(),l=1;l<r.length;l+=2)if("×"===r[l]){var u=Number(r[l-1]),o=Number(r[l+1]),h=n(u,o);r.splice(l-1,3,h),l-=2}for(var l=1;l<r.length;l+=2)if("÷"===r[l]){var u=Number(r[l-1]),o=Number(r[l+1]),h=t(u,o);r.splice(l-1,3,h),l-=2}for(var l=1;l<r.length;l+=2)if("+"===r[l]){var u=Number(r[l-1]),o=Number(r[l+1]),h=e(u,o);r.splice(l-1,3,h),l-=2}for(var l=1;l<r.length;l+=2)if("−"===r[l]){var u=Number(r[l-1]),o=Number(r[l+1]),h=c(u,o);r.splice(l-1,3,h),l-=2}return i(r[0])}var u=[],f=[];c(),r(),$("#equals").click(function(){u.length=0,n(),$("div.calculate").text(l())})});
